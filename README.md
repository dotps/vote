# Опросы

Бекенд-приложение REST API сервиса для создания и участия в опросах. Учебный проект MetaLamp Node.js Education.

Написано на node.js с использованием typescript, Nest, TypeORM и PostgreSQL. Для описания API используется Swagger.

Установить зависимости: `npm install`<br>
Создать базу в PostgreSql<br>
Переименовать `.env-default` в `.env` и задать настройки БД<br>
Запустить миграцию с начальными данными `ИЗМЕНИТЬ`<br>
>Перевести TypeOrm в prod чтобы использовать миграции 

Запустить приложение: `npm run dev`

// TODO: дописать

## Возможности ##
* Регистрация пользователя
* Авторизация пользователя
* Создание опроса с вопросами и вариантами ответов
* Просмотр списка опросов на платформе
* Участие в опросе (отправить ответы на вопросы опроса)
* Просмотр результатов опроса
* Управление своими опросами (просмотр, редактирование, сделать неактивным для дальнейшего участия)
* Завершение опроса (сделать неактивным для дальнейшего участия)

Доступ к сервису осуществляется через токен авторизации *Bearer Token*. Токен выдается при регистрации пользователя.

Зарегистрироваться и получить токен `POST` `http://localhost:3000/users`
```json
{
  "name": "Test",
  "email": "test@test.ru",
  "password": "password"
}
```
или использовать следующий токен (действует до конца 2025 года)
>Обновить токен после чистки БД  
```
"token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjE4LCJ1c2VybmFtZSI6IlRlc3QiLCJpYXQiOjE3NDczMTg3NzQsImV4cCI6MTc0OTkxMDc3NH0.fEJ8jYMGaaY8Hh-SBt3eyZ80hPx7NqF1M-yeZyVmbaQ"
```
Остальные маршруты и структуры даных см. в документации Swagger http://localhost:3000/docs или в папке `tests/postman` там есть коллекция запросов.

## Тестирование ##

### Автоматические тесты ###
Реализованы тесты с моками и интеграционные для полной проверки работы api. Проверяется валидность входных данных, успешные и неуспешные результаты ответов, а также проблемы подключения к БД.

Запуск тестов: `npm test`

### Postman ###

В папке `tests/postman` есть коллекция запросов для тестирования вручную.